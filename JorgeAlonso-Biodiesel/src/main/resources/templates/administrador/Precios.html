<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragmentos/head::head(titulo='Gestión de precios')}">
  <meta name="description" content="Área del administrador donde se gestionana los precios">
</head>

<body>

  <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <a class="navbar-brand" href="#">
      <img id="imagenNav" src="../img/logo.png" alt="Logo de la empresa">
    </a>

    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
      data-target="#collapsibleNavbar" aria-controls="navbarResponsive" aria-expanded="false"
      aria-label="Toggle navigation" id="botonNav">
      Menu
      <i class="fas fa-bars"></i>
    </button>


    <div class="collapse navbar-collapse text-right" id="collapsibleNavbar">
      <ul class="navbar-nav ml-auto align-items-center">
        <li class="nav-item navLink">
          <a class="nav-link" href="/#servicios">Que ofrecemos</a>
        </li>
        <li class="nav-item navLink">
          <a class="nav-link" href="/#productos">Productos</a>
        </li>
        <li class="nav-item navLink">
          <a class="nav-link" href="/#historia">Historia</a>
        </li>
        <li class="nav-item navLink">
          <a class="nav-link" href="/#produccion">Producción</a>
        </li>
        <li class="nav-item navLink">
          <a class="nav-link" href="/#principios">Principios básicos</a>
        </li>
        <li class="nav-item navLink">
          <a class="nav-link" href="/#equipo">Equipo</a>
        </li>
        <li class="nav-item navLink">
          <a class="nav-link" href="/#contacto">Contacto</a>
        </li>
        <li class="nav-item navLink" id="opcionGestion">
          <a class="btn botonNavbar" href="/administrador" role="button">Área del administrador</a>
        </li>
        <li class="nav-item navLink" id="opcionCerrarSesion">
          <a class="btn botonNavbar" href="#" role="button">Cerrar sesión</a>
        </li>
      </ul>
    </div>
  </nav>
  <br>
  <main>
    <section>
      <div class="row conten justify-content-around mx-auto">
        <div class="col-sm-12 col-lg-5 mt-5">
          <h2>Materias primas</h2>
          <table class="table table-bordered table-hover table-responsive-sm mx-auto" id="tablaMateriasPrimas">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Precio (€/Kg)</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="producto : ${listaMateriasPrimas}">
                <td th:text="${producto.nombre}">X</td>
                <td>
                  <input th:id="'precio' + ${producto.id}" type="number" class="form-control" step=".001"
                    placeholder="Inserte el precio" th:value="${producto.precio}">
                </td>
                <td> <button type="button" th:onclick="'actualizarProducto('+${producto.id}+')'"
                    class="btn btn-light">Actualizar</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="col-sm-12 col-lg-5 mt-5">
          <h2>Productos</h2>
          <table class="table table-bordered table-hover table-responsive-sm mx-auto" id="tablaProductos">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Precio (€/Kg)</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="producto : ${listaProductos}">
                <td th:text="${producto.nombre}">X</td>
                <td>
                  <input th:id="'precio' + ${producto.id}" type="number" class="form-control" step=".001"
                    placeholder="Inserte el precio" th:value="${producto.precio}">
                </td>
                <td> <button type="button" th:onclick="'actualizarProducto('+${producto.id}+')'"
                    class="btn btn-light">Actualizar</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="row">
        <div class="conten mx-auto col-sm-12 col-lg-5 mt-5">
          <h2 class="mx-auto">Transporte</h2>
          <table class="table table-bordered table-hover table-responsive-sm mx-auto" id="tablaPrecios">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Precio (€/dia)</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Tren</td>
                <td><input type="number" class="form-control" id="precioT1" min="0" step=".001" th:id="admin1"
                    placeholder="Inserte el precio" value="0" th:value="${administrador.precioTren}"></td>
                <td><button type="button" th:onclick="'actualizarAdmin('+1+')'" class="btn btn-light">Actualizar</button>
                </td>
              </tr>
              <tr>
                <td>Barco</td>
                <td><input type="number" class="form-control" id="precioT1" min="0" step=".001" th:id="admin2"
                    placeholder="Inserte el precio" value="0" th:value="${administrador.precioBarco}"></td>
                <td><button type="button" th:onclick="'actualizarAdmin('+2+')'" class="btn btn-light">Actualizar</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
  </main>
  <div th:replace="~{fragmentos/footer::footer}"></div>

  <script>
   
    function actualizarProducto(id) {
      window.location.href = "/administrador/precios/" + id + "?precio=" + $('#precio' + id).val();
    }

    function actualizarAdmin(id) {
      window.location.href = "/administrador/precios/admin/" + id + "?precio=" + $('#admin' + id).val();
    }

  </script>

</body>

</html>